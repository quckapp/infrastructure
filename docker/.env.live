# =============================================================================
# QUCKAPP - LIVE ENVIRONMENT
# =============================================================================
# Live production alias - Points to production with enhanced monitoring
# Used for blue/green deployments and canary releases
# =============================================================================

ENVIRONMENT=live
COMPOSE_PROJECT_NAME=quckapp-live

# =============================================================================
# INFRASTRUCTURE SETTINGS
# =============================================================================

# PostgreSQL (Primary + Replicas)
POSTGRES_HOST=postgres-live.quckapp.internal
POSTGRES_PORT=5432
POSTGRES_USER=quckapp_live
POSTGRES_PASSWORD=${POSTGRES_LIVE_PASSWORD}
POSTGRES_DB=quckapp_live
POSTGRES_SSL_MODE=verify-full
POSTGRES_POOL_SIZE=50
POSTGRES_READ_REPLICAS=postgres-live-replica-1.quckapp.internal,postgres-live-replica-2.quckapp.internal

# MongoDB (Replica Set)
MONGO_HOST=mongo-live.quckapp.internal
MONGO_PORT=27017
MONGO_ROOT_USER=admin
MONGO_ROOT_PASSWORD=${MONGO_LIVE_PASSWORD}
MONGO_DB=quckapp_live
MONGO_REPLICA_SET=rs0-live
MONGO_READ_PREFERENCE=secondaryPreferred

# Redis (Cluster)
REDIS_HOST=redis-live.quckapp.internal
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_LIVE_PASSWORD}
REDIS_DB=0
REDIS_TLS_ENABLED=true
REDIS_CLUSTER_ENABLED=true

# Elasticsearch (Cluster)
ELASTICSEARCH_HOST=elasticsearch-live.quckapp.internal
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_LIVE_PASSWORD}
ELASTICSEARCH_INDEX_PREFIX=quckapp_live
ELASTICSEARCH_REPLICAS=2

# ClickHouse (Cluster)
CLICKHOUSE_HOST=clickhouse-live.quckapp.internal
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_USER=quckapp_live
CLICKHOUSE_PASSWORD=${CLICKHOUSE_LIVE_PASSWORD}
CLICKHOUSE_DB=quckapp_live_analytics
CLICKHOUSE_CLUSTER=quckapp_cluster

# Kafka (Cluster)
KAFKA_BROKERS=kafka-live-1.quckapp.internal:9092,kafka-live-2.quckapp.internal:9092,kafka-live-3.quckapp.internal:9092
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=SCRAM-SHA-512

# S3 (Multi-region)
S3_ENDPOINT=https://s3.us-east-1.amazonaws.com
S3_BUCKET=quckapp-live
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=${AWS_LIVE_ACCESS_KEY}
AWS_SECRET_ACCESS_KEY=${AWS_LIVE_SECRET_KEY}
S3_BACKUP_BUCKET=quckapp-live-backup
S3_BACKUP_REGION=us-west-2

# CDN
CDN_URL=https://cdn.quckapp.io
CDN_DISTRIBUTION_ID=${CLOUDFRONT_LIVE_DISTRIBUTION_ID}

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Logging
LOG_LEVEL=warn
LOG_FORMAT=json

# API Gateway
GATEWAY_URL=https://api.quckapp.io
CORS_ORIGINS=https://app.quckapp.io,https://quckapp.io

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=500
RATE_LIMIT_WINDOW=60

# =============================================================================
# SECURITY
# =============================================================================

JWT_SECRET=${JWT_LIVE_SECRET}
JWT_EXPIRY=4h
JWT_REFRESH_EXPIRY=1d
JWT_ISSUER=quckapp

SECRET_KEY_BASE=${SECRET_KEY_BASE_LIVE}
ENCRYPTION_KEY=${ENCRYPTION_KEY_LIVE}

# Security Headers
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# WAF
WAF_ENABLED=true
WAF_RULE_SET=OWASP-CRS-3.3

# =============================================================================
# MONITORING
# =============================================================================

PROMETHEUS_ENABLED=true
GRAFANA_URL=https://grafana.quckapp.io
JAEGER_ENDPOINT=https://jaeger.quckapp.internal:14268/api/traces
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel.quckapp.internal:4317

# Tracing (Lower sample rate for live)
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.05

# Sentry
SENTRY_DSN=${SENTRY_LIVE_DSN}
SENTRY_ENVIRONMENT=live

# PagerDuty
PAGERDUTY_INTEGRATION_KEY=${PAGERDUTY_LIVE_KEY}

# DataDog APM (Optional)
DATADOG_API_KEY=${DATADOG_API_KEY}
DATADOG_APM_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Firebase
FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
FIREBASE_PRIVATE_KEY=${FIREBASE_PRIVATE_KEY}
FIREBASE_CLIENT_EMAIL=${FIREBASE_CLIENT_EMAIL}

# Email (SendGrid)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=${SENDGRID_LIVE_API_KEY}
EMAIL_FROM=noreply@quckapp.io

# SMS (Twilio)
TWILIO_ACCOUNT_SID=${TWILIO_LIVE_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_LIVE_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_LIVE_PHONE}

# =============================================================================
# FEATURE FLAGS
# =============================================================================

FEATURE_WEBSOCKET_ENABLED=true
FEATURE_VIDEO_CALLS_ENABLED=true
FEATURE_FILE_UPLOAD_ENABLED=true
FEATURE_SEARCH_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_ML_ENABLED=true
FEATURE_DEBUG_MODE=false

# =============================================================================
# SCALING
# =============================================================================

REPLICAS_MIN=3
REPLICAS_MAX=15
CPU_REQUEST=500m
CPU_LIMIT=2000m
MEMORY_REQUEST=1Gi
MEMORY_LIMIT=2Gi

# Auto-scaling
AUTOSCALE_CPU_THRESHOLD=70
AUTOSCALE_MEMORY_THRESHOLD=80

# =============================================================================
# DEPLOYMENT
# =============================================================================

# Blue/Green Deployment
DEPLOYMENT_STRATEGY=blue-green
CANARY_PERCENTAGE=10
ROLLBACK_TIMEOUT=300
