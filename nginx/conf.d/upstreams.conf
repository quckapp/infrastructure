# =============================================================================
# QuckApp Upstream Definitions
# =============================================================================
# All 33 microservice upstreams organized by technology stack.
# Each upstream has keepalive connections sized to expected traffic.
# =============================================================================

# ============================================
# NestJS Services (API & Notifications)
# ============================================
upstream backend_gateway {
    server backend-gateway:3000;
    keepalive 32;
}

upstream notification_service {
    server notification-service:3001;
    keepalive 16;
}

upstream realtime_service {
    server realtime-service:4000;
    keepalive 64;
}

# ============================================
# Spring Boot Services (Auth & Security)
# ============================================
upstream auth_service {
    server auth-service:8081;
    keepalive 32;
}

upstream user_service {
    server user-service:8082;
    keepalive 16;
}

upstream permission_service {
    server permission-service:8083;
    keepalive 16;
}

upstream audit_service {
    server audit-service:8084;
    keepalive 16;
}

upstream admin_service {
    server admin-service:8085;
    keepalive 16;
}

upstream security_service {
    server security-service:8086;
    keepalive 16;
}

# ============================================
# Elixir Services (Real-time Communication)
# ============================================
upstream presence_service {
    server presence-service:4001;
    keepalive 32;
}

upstream call_service {
    server call-service:4002;
    keepalive 32;
}

upstream message_service {
    server message-service:4003;
    keepalive 64;
}

upstream notification_orchestrator {
    server notification-orchestrator:4004;
    keepalive 16;
}

upstream huddle_service {
    server huddle-service:4005;
    keepalive 32;
}

upstream event_broadcast_service {
    server event-broadcast-service:4006;
    keepalive 32;
}

# ============================================
# Go Services (Organization & Storage)
# ============================================
upstream media_service {
    server media-service:5001;
    keepalive 16;
}

upstream file_service {
    server file-service:5002;
    keepalive 16;
}

upstream workspace_service {
    server workspace-service:5004;
    keepalive 16;
}

upstream channel_service {
    server channel-service:5005;
    keepalive 16;
}

upstream search_service {
    server search-service:5006;
    keepalive 16;
}

upstream thread_service {
    server thread-service:5009;
    keepalive 16;
}

upstream bookmark_service {
    server bookmark-service:5010;
    keepalive 8;
}

upstream reminder_service {
    server reminder-service:5011;
    keepalive 8;
}

upstream attachment_service {
    server attachment-service:5012;
    keepalive 16;
}

upstream cdn_service {
    server cdn-service:5013;
    keepalive 32;
}

# ============================================
# Python Services (AI & Analytics)
# ============================================
upstream analytics_service {
    server analytics-service:5007;
    keepalive 8;
}

upstream ml_service {
    server ml-service:5008;
    keepalive 8;
}

upstream moderation_service {
    server moderation-service:5014;
    keepalive 8;
}

upstream export_service {
    server export-service:5015;
    keepalive 8;
}

upstream integration_service {
    server integration-service:5016;
    keepalive 8;
}

upstream sentiment_service {
    server sentiment-service:5017;
    keepalive 8;
}

upstream insights_service {
    server insights-service:5018;
    keepalive 8;
}

upstream smart_reply_service {
    server smart-reply-service:5019;
    keepalive 8;
}
